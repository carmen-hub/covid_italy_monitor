<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_covid_province_list" model="ir.ui.view">
        <field name="name">covid.province.list</field>
        <field name="model">covid.province</field>
        <field name="arch" type="xml">
            <list string="COVID-19 Data" create="false" edit="false">
                <field name="date" />
                <field name="region_name" />
                <field name="name" />
                <field name="total_cases" sum="Total" />
            </list>
        </field>
    </record>

    <record id="view_covid_province_form" model="ir.ui.view">
        <field name="name">covid.province.form</field>
        <field name="model">covid.province</field>
        <field name="arch" type="xml">
            <form string="Provincial Detail" edit="0" create="0" delete="0">
                <sheet>
                    <div class="oe_title">
                        <label string="Province" for="name" />
                        <h1>
                            <field name="name" class="oe_inline" />
                            <span invisible="not acronym_province">-</span>
                            <field name="acronym_province" class="oe_inline" />
                        </h1>
                    </div>
                    <group>
                        <group name="geo_info" string="Localization">
                            <field name="region_name" />
                            <field name="state" />
                            <label string="Latitude" for="lat" />
                            <div class="o_row">
                                <field name="lat" />
                                <span class="oe_grey">lat.</span>
                            </div>
                            <label string="Longitude" for="long" />
                            <div class="o_row">
                                <field name="long" />
                                <span class="oe_grey">long.</span>
                            </div>
                        </group>
                        <group name="stats" string="Epidemiological Data">
                            <field name="date" />
                            <field name="total_cases" widget="integer" decoration-bf="1" />
                        </group>
                    </group>
                    <notebook>
                        <page name="codes" string="Technical Codes">
                            <group>
                                <group string="Administration">
                                    <field name="region_code" />
                                    <field name="province_code" />
                                </group>
                                <group string="Standard NUTS (EU)">
                                    <field name="nuts_code_1" />
                                    <field name="nuts_code_2" />
                                    <field name="nuts_code_3" />
                                </group>
                            </group>
                        </page>
                        <page name="notes" string="Note">
                            <field name="note" nolabel="1" />
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="view_covid_province_search" model="ir.ui.view">
        <field name="name">covid.province.search</field>
        <field name="model">covid.province</field>
        <field name="arch" type="xml">
            <search>
                <field name="date" />
                <field name="region_name" />
                <filter name="filter_today" string="Today" domain="[('date', '=', context_today().strftime('%Y-%m-%d'))]" />
                <group string="Group By" expand="1">
                    <filter name="group_region" string="Region" context="{'group_by':'region_name'}" />
                </group>
            </search>
        </field>
    </record>

    <record id="action_covid_italy_monitor" model="ir.actions.act_window">
        <field name="name">COVID-19 Statistics</field>
        <field name="res_model">covid.province</field>
        <field name="view_mode">list,form</field>
        <field name="context">{
            'search_default_filter_today': 1,
            'search_default_group_region': 1
        }</field>
        <field name="help" type="html">
            <div class="text-center">
                <i class="fa fa-cloud-download fa-3x text-info mb-3" />
                <p class="o_view_nocontent_smiling_face">Sincronizzazione dati in corso...</p>
                <p class="text-muted">
                    Odoo si sta collegando al repository della Protezione Civile.
                    <br />
                    L'operazione avviene solo al primo accesso della giornata e pu√≤ richiedere circa 10 secondi.
                </p>
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
        </field>
    </record>
</odoo>